<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
    <title>Stackoverflow</title>
  </head>
  <!--Import Google Icon Font-->
  <link href="http://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">
  <!-- Compiled and minified CSS -->
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/materialize/0.98.0/css/materialize.min.css">
  <link rel="stylesheet" href="css/main.css">
  <!--Let browser know website is optimized for mobile-->
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <body>
    <nav class="teal lighten-1" role="navigation">
      <div class="nav-wrapper container"><a id="logo-container" href="#" class="brand-logo">Stack Overflow</a>
        <ul class="right hide-on-med-and-down">
          <li><button class="teal accent-2 btn logout black-text">Logout</button></li>
        </ul>

        <ul id="nav-mobile" class="side-nav">
          <li><button class="logout">Logout</a></button>
        </ul>
        <a href="#" data-activates="nav-mobile" class="button-collapse"><i class="material-icons">menu</i></a>
      </div>
    </nav>

    <div class="container" style="margin-top: 25px;">
      <div class="section">
        <div class="row">
            <form id="add_question" class="col s12">
              <div class="row">
                <div class="input-field col s6">
                  <input placeholder="Input the title here" id="title" name="title" type="text" class="validate">
                  <label for="title">Title</label>
                </div>
              </div>
              <div class="row">
                <div class="input-field col s12">
                  <textarea placeholder="Input the content here" id="content" name="content" class="materialize-textarea"></textarea>
                  <label for="textarea">Description</label>
                </div>
              </div>
              <div class="row">
                <div class="input-field col s12">
                  <button id="submit_question_add" class="waves-effect waves-light btn"><i class="material-icons left">input</i>Add Question</button>
                </div>
              </div>
            </form>
          </div>

        <div class="row" id="global_message">

        </div>

        <div class="row">
          <h3>Questions</h3>
        </div>

        <table>
        <thead>
          <tr>
            <th>Vote</th>
            <th>Answers</th>
            <th>Title</th>
          </tr>
        </thead>
        <tbody id="table_content"></tbody>
      </table>

      </div>
    </div>

    <div id="answer" class="modal" style="width:1200px">
      <div class="modal-content">
        <h4 id="question">Modal Header</h4>
        <ul class="collection" style="margin-bottom: 35px">
         <li class="collection-item avatar" style="padding-left:10px;">
           <h5>Title</h5>
           <hr class="hr-300">
           <br>
           <p>Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat. Duis aute irure dolor in reprehenderit in voluptate velit esse cillum dolore eu fugiat nulla pariatur. Excepteur sint occaecat cupidatat non proident, sunt in culpa qui officia deserunt mollit anim id est laborum.</p>
           <a class="secondary-content" style="margin-right:100px;"><i class="material-icons">thumb_down</i></a>
           <p class="secondary-content" style="margin-right:50px;">105</p>
           <p class="secondary-content" style="margin-right:150px;">105</p>
           <a class="secondary-content" style="margin-right:200px;"><i class="material-icons">thumb_up</i></a>
         </li>
       </ul>

       <h5>Answers</h5>
       <ul class="collection">
         <li class="collection-item avatar" style="padding-left:10px;">
           <h5>Title</h5>
           <hr class="hr-300">
           <br>
           <p>Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat. Duis aute irure dolor in reprehenderit in voluptate velit esse cillum dolore eu fugiat nulla pariatur. Excepteur sint occaecat cupidatat non proident, sunt in culpa qui officia deserunt mollit anim id est laborum.</p>
           <a class="secondary-content" style="margin-right:100px;"><i class="material-icons">thumb_down</i></a>
           <p class="secondary-content" style="margin-right:50px;">105</p>
           <p class="secondary-content" style="margin-right:150px;">105</p>
           <a class="secondary-content" style="margin-right:200px;"><i class="material-icons">thumb_up</i></a>
         </li>
         <li class="collection-item avatar" style="padding-left:10px;">
           <h5>Title</h5>
           <hr class="hr-300">
           <br>
           <p>Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat. Duis aute irure dolor in reprehenderit in voluptate velit esse cillum dolore eu fugiat nulla pariatur. Excepteur sint occaecat cupidatat non proident, sunt in culpa qui officia deserunt mollit anim id est laborum.</p>
           <a class="secondary-content" style="margin-right:100px;"><i class="material-icons">thumb_down</i></a>
           <p class="secondary-content" style="margin-right:50px;">105</p>
           <p class="secondary-content" style="margin-right:150px;">105</p>
           <a class="secondary-content" style="margin-right:200px;"><i class="material-icons">thumb_up</i></a>
         </li>
       </ul>
      </div>
      <div class="modal-footer" style="padding: 0px 25px;">
        <ul class="collection">
          <li class="collection-item avatar" style="padding-left:10px;">
            <div class="row">
              <form class="col s12">
                <div class="row">
                  <div class="input-field col s12">
                    <input id="textarea1" placeholder="Post your answer here" />
                  </div>
                </div>
                <div class="row">
                  <div class="input-field col s12">
                    <button class="waves-effect waves-light btn left"><i class="material-icons left">input</i>Submit Answer</button>
                  </div>
                </div>
              </form>
            </div>
          </li>
        </ul>
      </div>
    </div>

  <!--Import jQuery before materialize.js-->
  <script type="text/javascript" src="https://code.jquery.com/jquery-2.1.1.min.js"></script>
  <!-- Compiled and minified JavaScript -->
  <script src="https://cdnjs.cloudflare.com/ajax/libs/materialize/0.98.0/js/materialize.min.js"></script>
  <script src="js/init.js"></script>
  <script>
    $(document).ready(function(){
      // the "href" attribute of .modal-trigger must specify the modal ID that wants to be triggered
      $('.modal').modal();
    });

    // Redirect to login page if jwt-token not exist!
    if(!localStorage.getItem('jwt-token')) {
      window.location.href = 'http://localhost:3000'
    }

    // clear the storage after logout
    $('.logout').click(function(){
      localStorage.clear()
      window.location.href = 'http://localhost:3000'
    })

  </script>
  <script>
  // function to reset the form
  function resetForm($form) {
    $form.find('input:text, input:password, input:file, select, textarea').val('');
    $form.find('input:radio, input:checkbox')
         .removeAttr('checked').removeAttr('selected');
  }
  </script>
  <script>
  let index = 0;
  $.ajax({
    type: 'GET',
    url: 'http://localhost:3000/api/questions/',
    dataType: 'json',
    success: function(data){
      console.log(data);
      for(let i = 0; i < data.length; i++) {
        $('#table_content').append(
          `
            <tr>
              <td>${data[i].upvote.length + data[i].downvote.length}</td>
              <td>${data[i].answers.length}</td>
              <td> <a href="#answer" style="cursor:pointer">${data[i].title}</a></td>
            </tr>
          `
        )
        index++
      }
    }
  })
  </script>
  <script>

  </script>
  <script>

  </script>
  </body>
</html>
